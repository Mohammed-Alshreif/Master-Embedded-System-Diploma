/**
 ******************************************************************************
 * @file           : main.c
 * @author         : MOHAMMED Adel Alshreif
 * @brief          : Main program body
 ******************************************************************************
 ******************************************************************************
 */
#include "WS2812b_LED.h"
#define clk 36000000



//uint8_t (*(POV_STRING[]))[8][5]={&L,&sp,&E,&sp,&A,&sp,&R,&sp,&N,&sp,&sp,&I,&sp,&N,&sp,&sp,&D,&sp,&E,&sp,&P,&sp,&T,&sp,&H,(void*)0};
//uint8_t color[][3]={{255,0,0},{0,0,0},{227,100,80},{0,0,0},{227,255,80},{0,0,0},{0,0,255},{0,0,0},{0,255,255},{0,0,0},{0,0,0},{227,0,255}
//		,{0,0,0},{227,0,80},{0,0,0},{0,0,0},{227,47,80},{0,0,0},{227,100,100},{0,0,0},{0,255,255},{0,0,0},{0,255,5},{0,0,0},{0,0,255}};

//uint8_t PHOTO_ARR[8][125] = {
//   {0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0},
//   {0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0},
//   {0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0},
//   {0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0},
//   {1,1,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0},
//   {1,1,0,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,0,0},
//   {0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0},
//   {0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0}};
//


//===========================================
uint8_t (*(POV_STRING[]))[8][5]={&N_1,&sp,&O,&sp,&Colon,&sp,&N_3,&sp,&N_7,&sp,&Colon,&sp,&N_1,&sp,&O,&sp,&sp,&A,&sp,&M,(void*)0};
uint8_t color[][3]={{255,0,0},{0,0,0},{227,100,80},{0,0,0},{227,255,80},{0,0,0},{0,0,255}
,{0,0,0},{0,255,255},{0,0,0},{227,0,255},{0,0,0},{0,255,255},{0,0,0},{0,0,255},{0,0,0},{0,0,0},{255,0,255},{0,0,0},{0,0,255}};

static uint8_t (*(NUMBERS[]))[8][5]={O,N_1,N_2,N_3,N_4,N_5,N_6,N_7,N_8,N_9};
uint8_t second ,second_ONS,second_TENS ,minute=30,minute_ONS,minute_TENS, hour=10,hour_ONS,hour_TENS ;
void CLOCK(){
	second++;
	if(second>=60){
		minute++;
		second=0;
	}
	if(minute>=60){
		hour++;
		minute=0;
	}
	if(hour>12){
		hour=12;
	}

	second_ONS=second%10;
	second_TENS=second/10;

	minute_ONS=minute%10;
	minute_TENS=minute/10;

	hour_ONS=hour%10;
	hour_TENS=hour/10;

	POV_STRING[12]=NUMBERS[second_TENS];
	POV_STRING[14]=NUMBERS[second_ONS];

	POV_STRING[6]=NUMBERS[minute_TENS];
	POV_STRING[8]=NUMBERS[minute_ONS];

	POV_STRING[0]=NUMBERS[hour_TENS];
	POV_STRING[2]=NUMBERS[hour_ONS];

	TIMER_ISR(TIM3,999, U_ms, clk, CLOCK);
}
int main(void)
{
	WS2812b_LED_INIT();
	TIMER_ISR(TIM3,1000, U_ms, clk, CLOCK);

	while(1){
		//WS2812b_Graphics_Print(PHOTO_ARR);
		WS2812b_print_srting(POV_STRING, color);
	}
}
